<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì›¹ì‚¬ì´íŠ¸</title>
    
    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <!-- GSAP CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <link rel="stylesheet" href="dead-assembly-style.css">
</head>
<body>
    <header class="header">
        <div class="header-container active">
            <nav class="nav nav-left">
                <ul class="nav-menu">
                    <li><a href="door.html">ì…êµ¬</a></li>
                    <li><a href="about_main.html">ì‚¬í›„ê¸°ë¡</a></li>
                </ul>
            </nav>
            <div class="logo">
                <a href="#"><img src="image/header_Logo.png" alt="Logo"></a>
            </div>
            <nav class="nav nav-right">
                <ul class="nav-menu">
                    <li><a href="dead-assembly.html">ë§ìì§‘íšŒ</a></li>
                    <li><a href="video.html">ì°¨ì•ˆê³¼ í”¼ì•ˆ</a></li>
                </ul>
            </nav>
            <button class="menu-toggle" aria-label="ë©”ë‰´ ì—´ê¸°">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>
    
    <div class="background-container">
        <!-- íƒ€ì´í‹€ ì„¹ì…˜ -->
        <section class="title-section">
            <div class="title-bg">
                <img src="image/title_bg.png" alt="íƒ€ì´í‹€ ë°°ê²½">
            </div>
            <div class="title-caption">
                <p>
                    ì´ê³³ì€ ë§ìì˜ í”ì ì´ ëª¨ì´ê³ , ìƒìì˜ ì‹œì„ ì´ ë‹¿ëŠ” ê²½ê³„ì˜ ìë¦¬ì…ë‹ˆë‹¤.<br>
                    ì‚¬ë¼ì§„ ì´ë“¤ì˜ ê¸°ë¡ì€ ë‹¤ì‹œ ë¹›ìœ¼ë¡œ ê¹¨ì–´ë‚˜ ì €ë§ˆë‹¤ì˜ ëª©ì†Œë¦¬ë¡œ ìì‹ ì„ ì¦ëª…í•©ë‹ˆë‹¤.<br>
                    ì´ê³³ì—ì„œ ìƒìëŠ” ê·¸ë“¤ì˜ í”ì ì„ ë°”ë¼ë³´ê³ , ì €ë§ˆë‹¤ì˜ ì—…ì„ ë§ˆì£¼í•˜ê²Œ ë©ë‹ˆë‹¤.
                </p>
            </div>
            <div class="scroll-indicator" aria-hidden="true">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </section>
        
        <!-- ì›°ì»´ + ì •ë³´ ì¹´ë“œ ë¬¶ìŒ -->
        <section id="welcome-info" class="welcome-info-section">
            <div class="welcome-section">
                <div class="welcome-text-container">
                    <p class="welcome-line">ì–´ì„œì˜¤ì„¸ìš”.</p>
                    <p class="welcome-line">
                        <span class="highlight">ë¬´í˜•ì—…ë³´(ç„¡å½¢æ¥­å ±)</span>ì— ì˜¤ì‹ ê±¸
                    </p>
                    <p class="welcome-line">í™˜ì˜í•©ë‹ˆë‹¤.</p>
                </div>
            </div>
            
            <!-- ë„¤ ê°œì˜ ì •ë³´ ì¹´ë“œ ì„¹ì…˜ -->
            <div class="info-cards-section">
                <div class="info-cards-wrapper">
                    <div class="info-cards-container">
                        <div class="info-card">
                            <p class="info-card-text">
                                ì „ë¬¸ê°€ì˜ ìƒë‹´ì´<br>
                                í•„ìš”í•˜ì‹ ê°€ìš”?<br><br>
                                24ì‹œê°„ 1:1 ìƒë‹´<br>
                                ìƒì‹œ ëŒ€ê¸°ì¤‘ì…ë‹ˆë‹¤!
                            </p>
                        </div>
                        <div class="info-card">
                            <p class="info-card-text">
                                ì•„í•˜! ê·¸ë ‡êµ¬ë‚˜<br>
                                ë³€ì„±ëŒ€ì™•ë‹˜ ì¬íŒ<br>
                                ë°°ì‹¬ì›ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ”ê±°<br>
                                í˜ë“¤ë‹¤ë˜ë° ë§ë‚˜ìš”?
                            </p>
                        </div>
                        <div class="info-card">
                            <p class="info-card-text">
                                ì €ìŠ¹êµ­ CHOICE<br>
                                â—‹â—‹ì¬íŒê´€ë‹˜ì˜ í–‰ìš´ì˜<br>
                                ì•„ì´í…œì€ ì—…ê²½ í‚¤ë§!
                            </p>
                        </div>
                        <div class="info-card">
                            <p class="info-card-text">
                                ì €ìŠ¹êµ­ ì„±ì§€<br>
                                ë§ìì˜€ë˜ ë‚´ê°€ ì¬íŒê´€<br>
                                ê¹Œì§€ ê°ˆ ìˆ˜ ìˆì—ˆë˜<br>
                                ì° í‘¼ë‹¤
                            </p>
                        </div>
                        <!-- ì¹´ë“œ ë³µì œ (ë¬´í•œ ë£¨í”„ìš©) -->
                        <div class="info-card">
                            <p class="info-card-text">
                                ì „ë¬¸ê°€ì˜ ìƒë‹´ì´<br>
                                í•„ìš”í•˜ì‹ ê°€ìš”?<br><br>
                                24ì‹œê°„ 1:1 ìƒë‹´<br>
                                ìƒì‹œ ëŒ€ê¸°ì¤‘ì…ë‹ˆë‹¤!
                            </p>
                        </div>
                        <div class="info-card">
                            <p class="info-card-text">
                                ì•„í•˜! ê·¸ë ‡êµ¬ë‚˜<br>
                                ë³€ì„±ëŒ€ì™•ë‹˜ ì¬íŒ<br>
                                ë°°ì‹¬ì›ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ”ê±°<br>
                                í˜ë“¤ë‹¤ë˜ë° ë§ë‚˜ìš”?
                            </p>
                        </div>
                        <div class="info-card">
                            <p class="info-card-text">
                                ì €ìŠ¹êµ­ CHOICE<br>
                                â—‹â—‹ì¬íŒê´€ë‹˜ì˜ í–‰ìš´ì˜<br>
                                ì•„ì´í…œì€ ì—…ê²½ í‚¤ë§!
                            </p>
                        </div>
                        <div class="info-card">
                            <p class="info-card-text">
                                ì €ìŠ¹êµ­ ì„±ì§€<br>
                                ë§ìì˜€ë˜ ë‚´ê°€ ì¬íŒê´€<br>
                                ê¹Œì§€ ê°ˆ ìˆ˜ ìˆì—ˆë˜<br>
                                ì° í‘¼ë‹¤
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ë§ìì§‘íšŒ ì„¹ì…˜ -->
        <section id="gathering" class="gathering-section">
            <div class="gathering-container">
                <!-- ìƒë‹¨ ì œëª© -->
                <div class="gathering-header">
                    <h1 class="gathering-title-kanji">(ç„¡å½¢æ¥­å ±)</h1>
                    <h2 class="gathering-title-subtitle">ë¬´í˜•ì—…ë³´: Karma</h2>
                </div>
                
                <!-- ë§ì ê²©ì -->
                <div class="gathering-grid">
                    <div class="gathering-card" data-card="1">
                        <img src="image/dead_01.png" data-hover-src="image/dead_01_01.png" alt="ë§ì 1" />
                    </div>
                    <div class="gathering-card" data-card="2">
                        <img src="image/dead_02.png" data-hover-src="image/dead_02_02.png" alt="ë§ì 2" />
                    </div>
                    <div class="gathering-card" data-card="3">
                        <img src="image/dead_03.png" data-hover-src="image/dead_03_03.png" alt="ë§ì 3" />
                    </div>
                    <div class="gathering-card" data-card="4">
                        <img src="image/dead_04.png" data-hover-src="image/dead_04_04.png" alt="ë§ì 4" />
                    </div>
                    <div class="gathering-card" data-card="5">
                        <img src="image/dead_01.png" data-hover-src="image/dead_01_01.png" alt="ë§ì 5" />
                    </div>
                    <div class="gathering-card" data-card="6">
                        <img src="image/dead_02.png" data-hover-src="image/dead_02_02.png" alt="ë§ì 6" />
                    </div>
                    <div class="gathering-card" data-card="7">
                        <img src="image/dead_03.png" data-hover-src="image/dead_03_03.png" alt="ë§ì 7" />
                    </div>
                    <div class="gathering-card" data-card="8">
                        <img src="image/dead_04.png" data-hover-src="image/dead_04_04.png" alt="ë§ì 8" />
                    </div>
                    <div class="gathering-card" data-card="9">
                        <img src="image/dead_01.png" data-hover-src="image/dead_01_01.png" alt="ë§ì 9" />
                    </div>
                    <div class="gathering-card" data-card="10">
                        <img src="image/dead_02.png" data-hover-src="image/dead_02_02.png" alt="ë§ì 10" />
                    </div>
                    <div class="gathering-card" data-card="11">
                        <img src="image/dead_03.png" data-hover-src="image/dead_03_03.png" alt="ë§ì 11" />
                    </div>
                    <div class="gathering-card" data-card="12">
                        <img src="image/dead_04.png" data-hover-src="image/dead_04_04.png" alt="ë§ì 12" />
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ë§ì íŒì—… ëª¨ë‹¬ -->
        <div id="gathering-popup" class="gathering-popup">
            <div class="popup-overlay"></div>
            <div class="popup-content">
                <button class="popup-close" aria-label="ë‹«ê¸°">Ã—</button>
                
                <!-- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->
                <div class="popup-main">
                    <!-- ë³¸ë¬¸ ì˜ì—­ -->
                    <div class="popup-left">
                        <!-- ì‘ì„±ì ì •ë³´ ì˜ì—­ -->
                        <div class="popup-author">
                            <div class="author-info">
                                <h3 class="author-name" id="popup-author-name">ë§ìëª…</h3>
                                <div class="author-meta">
                                    <span class="author-date" id="popup-author-date">ì¸ë©¸ì¼ì‹œ</span>
                                    <span class="author-realm" id="popup-author-realm">ì†Œì†</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ë³¸ë¬¸ ì˜ì—­ -->
                        <div class="popup-body">
                            <div class="popup-content-text" id="popup-content-text">
                                <p class="popup-text">ë§ìì˜ ê¸°ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                        
                        <!-- ëŒ“ê¸€ ì˜ì—­ -->
                        <div class="popup-comments">
                            <h4 class="comments-title">ë°˜ì‘</h4>
                            <div class="comments-list" id="popup-comments-list">
                                <!-- ëŒ“ê¸€ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                            </div>
                            
                            <!-- ëŒ“ê¸€ ì…ë ¥ì°½ (ìŠ¬ë¼ì´ë“œ) -->
                            <div class="comment-input-container" id="comment-input-container">
                                <div class="comment-input-wrapper">
                                    <input type="text" class="comment-input" id="comment-input" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”..." />
                                    <button class="comment-submit-btn" id="comment-submit-btn">ì‘ì„±</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ì˜¤ë¥¸ìª½: ì„¸ë¡œí˜• íƒ­ ë¼ë²¨ -->
                    <div class="popup-right">
                        <button class="popup-tab-btn" data-action="like">
                            <span class="tab-text">ê³µê°</span>
                        </button>
                        <button class="popup-tab-btn" data-action="comment">
                            <span class="tab-text">ëŒ“ê¸€</span>
                        </button>
                        <button class="popup-tab-btn" data-action="share">
                            <span class="tab-text">ìŠ¤í¬ë©</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- í•˜íŠ¸ ì• ë‹ˆë©”ì´ì…˜ ì»¨í…Œì´ë„ˆ -->
        <div class="hearts-container" id="hearts-container"></div>
        
        <!-- í† ìŠ¤íŠ¸ ë©”ì‹œì§€ -->
        <div class="toast-message" id="toast-message">
            <span class="toast-text">ê¸°ë¡ë³´ê´€ì†Œì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.</span>
        </div>
        
        <!-- ì—…ì˜ ì‚° + í‘¸í„° ì„¹ì…˜ -->
        <section class="mountain-footer-wrap">
            <div class="digital-mountain-section">
                <div class="mountain-overlay"></div>
                <img src="image/mon.png" alt="" aria-hidden="true">
            </div>
            <section class="digital-footer-section">
                <div class="footer-inner">
                    <div class="footer-header">
                        <h2>Digital Afterlife Records</h2>
                        <div class="view-toggle">
                            <button class="grid-btn">Grid</button>
                            <button class="list-btn active">List</button>
                        </div>
                    </div>
                    <ul class="footer-list">
                        <li>
                            <span class="footer-title">Department of Judgment</span>
                            <span class="footer-role">AI Ethical System / Data Processing</span>
                            <span class="footer-link">View Records â†’</span>
                        </li>
                        <li>
                            <span class="footer-title">Office of Karma Transmission</span>
                            <span class="footer-role">Digital Traces Management</span>
                            <span class="footer-link">Access Portal â†’</span>
                        </li>
                        <li>
                            <span class="footer-title">Seven Judges Division</span>
                            <span class="footer-role">Behavioral Analytics / Memory Archive</span>
                            <span class="footer-link">Open Files â†’</span>
                        </li>
                    </ul>
                    <div class="footer-credit">
                        <p>Â© 2025 DISAGU Digital Afterlife Corp. All Rights Reserved.</p>
                    </div>
                </div>
            </section>
        </section>
    </div>
    
    <script>
        // í—¤ë”ëŠ” í•­ìƒ í™œì„±í™” ìƒíƒœì´ë¯€ë¡œ ë¡œê³  í´ë¦­ìœ¼ë¡œ í† ê¸€í•˜ëŠ” ì½”ë“œ ì œê±°
        
        // í–„ë²„ê±° ë©”ë‰´ í† ê¸€ (ëª¨ë°”ì¼ìš©)
        const menuToggle = document.querySelector('.menu-toggle');
        const navLeft = document.querySelector('.nav-left');
        const navRight = document.querySelector('.nav-right');
        
        menuToggle.addEventListener('click', () => {
            navLeft.classList.toggle('active');
            navRight.classList.toggle('active');
        });
        
        // ë©”ë‰´ ë§í¬ í´ë¦­ ì‹œ ëª¨ë°”ì¼ ë©”ë‰´ ë‹«ê¸°
        const navLinks = document.querySelectorAll('.nav-menu a');
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    navLeft.classList.remove('active');
                    navRight.classList.remove('active');
                }
            });
        });

        // ìŠ¤í¬ë¡¤ ë°©í–¥ì— ë”°ë¼ ë¡œê³  í‘œì‹œ/ìˆ¨ê¹€
        let lastScrollY = window.scrollY;
        const scrollThreshold = 100;

        window.addEventListener('scroll', () => {
            const currentY = window.scrollY;

            if (currentY > scrollThreshold && currentY > lastScrollY) {
                document.body.classList.add('logo-hidden');
            } else if (currentY < lastScrollY || currentY <= scrollThreshold) {
                document.body.classList.remove('logo-hidden');
            }

            lastScrollY = currentY;
        });
        
        // ì´ˆê¸° ìŠ¤í¬ë¡¤ ì ê¸ˆ
        document.body.classList.add('scroll-locked');

        let scrollUnlocked = false;
        let autoScrolling = false;

        const welcomeInfoSection = document.getElementById('welcome-info');
        const updateWelcomeTop = () => {
            if (!welcomeInfoSection) return;
            const rect = welcomeInfoSection.getBoundingClientRect();
            const docTop = window.scrollY || window.pageYOffset;
            welcomeInfoSection.dataset.lockTop = rect.top + docTop;
        };

        // Hero ì„¹ì…˜ ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜
        document.addEventListener('DOMContentLoaded', function() {
            const observerOptions = {
                root: null,
                rootMargin: '200px 200px 200px 200px',
                threshold: 0.01
            };

            const animateElements = (entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            };

            const observer = new IntersectionObserver(animateElements, observerOptions);

            // Circle ìš”ì†Œë“¤ ì• ë‹ˆë©”ì´ì…˜
            const circleItems = document.querySelectorAll('.circle-item');
            const descriptionPs = document.querySelectorAll('.hero-description p');
            
            const heroSection = document.querySelector('.hero');
            if (heroSection) {
                const checkHeroVisible = () => {
                    const rect = heroSection.getBoundingClientRect();
                    const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
                    if (isVisible) {
                        circleItems.forEach((item, index) => {
                            setTimeout(() => {
                                item.classList.add('fade-in');
                            }, index * 200);
                        });
                        return true;
                    }
                    return false;
                };
                
                if (!checkHeroVisible()) {
                    const heroObserver = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                circleItems.forEach((item, index) => {
                                    setTimeout(() => {
                                        item.classList.add('fade-in');
                                    }, index * 200);
                                });
                                heroObserver.unobserve(entry.target);
                            }
                        });
                    }, {
                        root: null,
                        rootMargin: '0px',
                        threshold: 0.1
                    });
                    heroObserver.observe(heroSection);
                }
            } else {
                circleItems.forEach(item => observer.observe(item));
            }
            
            const titleSection = document.querySelector('.title-section');
            if (titleSection) {
                const titleObserver = new IntersectionObserver((entries, observerInstance) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            titleSection.classList.add('is-visible');
                            observerInstance.unobserve(entry.target);
                        }
                    });
                }, {
                    root: null,
                    threshold: 0.2
                });
                
                titleObserver.observe(titleSection);
            }
            
            descriptionPs.forEach(p => observer.observe(p));
            updateWelcomeTop();
        });
        
        window.addEventListener('resize', updateWelcomeTop);

        // Scroll indicator click â†’ move to welcome/info section
        const scrollIndicator = document.querySelector('.scroll-indicator');
        if (scrollIndicator && welcomeInfoSection) {
            const scrollToWelcome = () => {
                document.body.classList.remove('scroll-locked');
                scrollUnlocked = true;
                autoScrolling = true;
                updateWelcomeTop();
                const lockTop = Number(welcomeInfoSection.dataset.lockTop || 0);
                welcomeInfoSection.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
                setTimeout(() => {
                    updateWelcomeTop();
                    autoScrolling = false;
                }, 900);
            };
            
            scrollIndicator.setAttribute('role', 'button');
            scrollIndicator.setAttribute('tabindex', '0');
            scrollIndicator.setAttribute('aria-label', 'ì•„ë˜ ì„¹ì…˜ìœ¼ë¡œ ì´ë™');
            
            scrollIndicator.addEventListener('click', scrollToWelcome);
            scrollIndicator.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    scrollToWelcome();
                }
            });
        }

        const enforceScrollLimit = () => {
            if (!scrollUnlocked || autoScrolling || !welcomeInfoSection) return;
            const lockTop = Number(welcomeInfoSection.dataset.lockTop || 0);
            if (window.scrollY < lockTop) {
                window.scrollTo({ top: lockTop, behavior: 'auto' });
            }
        };

        window.addEventListener('scroll', enforceScrollLimit, { passive: true });
        
               // 49ì¬ ì„¹ì…˜ ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜
               const ritualColumns = document.querySelectorAll('.ritual-column');
               if (ritualColumns.length) {
                   const ritualObserver = new IntersectionObserver((entries) => {
                       entries.forEach((entry, index) => {
                           if (entry.isIntersecting) {
                               setTimeout(() => {
                                   entry.target.classList.add('fade-in');
                               }, index * 150);
                               ritualObserver.unobserve(entry.target);
                           }
                       });
                   }, {
                       root: null,
                       rootMargin: '0px',
                       threshold: 0.2
                   });
                   
                   ritualColumns.forEach(column => {
                       ritualObserver.observe(column);
                   });
               }
               
               // ë§ì ì¹´ë“œ ìˆœì°¨ ë“±ì¥
               const gatheringCardsForReveal = document.querySelectorAll('.gathering-card');
               if (gatheringCardsForReveal.length) {
                   const cardsObserver = new IntersectionObserver((entries, observerInstance) => {
                       entries.forEach(entry => {
                           if (entry.isIntersecting) {
                               const cards = entry.target.querySelectorAll('.gathering-card');
                               cards.forEach((card, idx) => {
                                   setTimeout(() => {
                                       card.classList.add('revealed');
                                   }, idx * 60);
                               });
                               observerInstance.unobserve(entry.target);
                           }
                       });
                   }, {
                       root: null,
                       threshold: 0.2
                   });

                   const gatheringGrid = document.querySelector('.gathering-grid');
                   if (gatheringGrid) {
                       cardsObserver.observe(gatheringGrid);
                   }
               }
               
               // í‘¸í„° ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜
               const footerInner = document.querySelector('.digital-footer-section .footer-inner');
               if (footerInner) {
                   const footerObserver = new IntersectionObserver((entries) => {
                       entries.forEach(entry => {
                           if (entry.isIntersecting) {
                               entry.target.classList.add('visible');
                               footerObserver.unobserve(entry.target);
                           }
                       });
                   }, {
                       root: null,
                       rootMargin: '0px',
                       threshold: 0.1
                   });
                   
                   footerObserver.observe(footerInner);
               }
               
               // Grid/List ë·° ì „í™˜
               const footerSection = document.querySelector('.digital-footer-section');
               const gridBtn = document.querySelector('.grid-btn');
               const listBtn = document.querySelector('.list-btn');
               
               if (footerSection && gridBtn && listBtn) {
                   // ê¸°ë³¸ê°’ì€ list-view
                   footerSection.classList.add('list-view');
                   
                   gridBtn.addEventListener('click', () => {
                       footerSection.classList.remove('list-view');
                       footerSection.classList.add('grid-view');
                       gridBtn.classList.add('active');
                       listBtn.classList.remove('active');
                   });
                   
                   listBtn.addEventListener('click', () => {
                       footerSection.classList.remove('grid-view');
                       footerSection.classList.add('list-view');
                       listBtn.classList.add('active');
                       gridBtn.classList.remove('active');
                   });
               }
               
               // ë§ì ì¹´ë“œ í˜¸ë²„ ì‹œ ì´ë¯¸ì§€ ì „í™˜
               const gatheringCardImages = document.querySelectorAll('.gathering-card img[data-hover-src]');
               gatheringCardImages.forEach(img => {
                   const defaultSrc = img.getAttribute('src');
                   const hoverSrc = img.dataset.hoverSrc;

                   if (!hoverSrc) return;

                   img.dataset.defaultSrc = defaultSrc;

                   const preload = new Image();
                   preload.src = hoverSrc;

                   const showHoverImage = () => {
                       img.src = hoverSrc;
                   };

                   const restoreDefaultImage = () => {
                       img.src = img.dataset.defaultSrc || defaultSrc;
                   };

                   img.addEventListener('mouseenter', showHoverImage);
                   img.addEventListener('mouseleave', restoreDefaultImage);
                   img.addEventListener('focus', showHoverImage);
                   img.addEventListener('blur', restoreDefaultImage);

                   img.addEventListener('touchstart', () => {
                       showHoverImage();
                       setTimeout(restoreDefaultImage, 250);
                   }, {passive: true});
               });

               // ë§ì ì¹´ë“œë³„ ë°ì´í„° ì •ì˜
               const cardData = {
                   1: {
                       name: "ê¹€ì² ìˆ˜",
                       date: "2024.11.05 14:23",
                       realm: "ì§€ì˜¥ë„",
                       content: "ìƒì „ì— ì†Œì…œë¯¸ë””ì–´ì—ì„œ ìˆ˜ë§ì€ ì•…í”Œì„ ë‚¨ê²¼ìŠµë‹ˆë‹¤. íƒ€ì¸ì˜ ê³ í†µì„ ì¦ê¸°ë©° ìœ í¬í•œ ê°€ì§œë‰´ìŠ¤ê°€ ìˆ˜ì²œ ê±´ì— ë‹¬í•©ë‹ˆë‹¤. ë””ì§€í„¸ í”ì ì´ ëª¨ë‘ ê¸°ë¡ë˜ì–´ ì‹¬íŒê´€ ì•ì— ì œì‹œë˜ì—ˆê³ , ê·¸ ê²°ê³¼ ì§€ì˜¥ë„ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤.",
                       comments: [
                           { author: "ì´ì˜í¬", text: "ë¹„ìŠ·í•œ ê²½í—˜ì„ í•œ ë§ìë¡œì„œ ê³µê°í•©ë‹ˆë‹¤. ë””ì§€í„¸ ì—…ë³´ëŠ” ì •ë§ ë¬´ì„­ë„¤ìš”.", date: "2024.11.06" },
                           { author: "ë°•ë¯¼ìˆ˜", text: "ì €ë„ ì•…í”Œ ë•Œë¬¸ì— ê³ ìƒí–ˆë˜ ê¸°ì–µì´... ì¡°ì‹¬í•˜ì„¸ìš”.", date: "2024.11.06" }
                       ]
                   },
                   2: {
                       name: "ì´ì˜í¬",
                       date: "2024.11.03 09:15",
                       realm: "ì•„ê·€ë„",
                       content: "ì˜¨ë¼ì¸ ì‡¼í•‘ëª°ì—ì„œ ë°˜í’ˆì„ ì•…ìš©í•˜ì—¬ ìˆ˜ë°± ê±´ì˜ ë¶€ì • í™˜ë¶ˆì„ ë°›ì•˜ìŠµë‹ˆë‹¤. ì‘ì€ ì´ìµì„ ìœ„í•´ ê±°ì§“ ì‹ ê³ ë¥¼ ë°˜ë³µí–ˆê³ , ê·¸ ëª¨ë“  ê¸°ë¡ì´ ë‚¨ì•„ìˆì—ˆìŠµë‹ˆë‹¤. ì•„ê·€ë„ì—ì„œ ë°°ê³ í””ì„ ê²¬ëŒì•¼ í•©ë‹ˆë‹¤.",
                       comments: [
                           { author: "ìµœì§€í›ˆ", text: "ë°˜í’ˆ ì•…ìš©... ì €ë„ ë¹„ìŠ·í•œ ì¼ì„ í–ˆë˜ ê²ƒ ê°™ì•„ìš”. í›„íšŒë©ë‹ˆë‹¤.", date: "2024.11.04" },
                           { author: "ì •ìˆ˜ì§„", text: "ë””ì§€í„¸ í”ì ì€ ì •ë§ ì§€ì›Œì§€ì§€ ì•Šë„¤ìš”.", date: "2024.11.04" }
                       ]
                   },
                   3: {
                       name: "ë°•ë¯¼ìˆ˜",
                       date: "2024.10.28 16:42",
                       realm: "ì¶•ìƒë„",
                       content: "ê²Œì„ì—ì„œ ê³„ì • ê±°ë˜ì™€ í˜„ê¸ˆ ê±°ë˜ë¥¼ í†µí•´ ìˆ˜ë°±ë§Œ ì›ì˜ ë¶€ì • ìˆ˜ìµì„ ì˜¬ë ¸ìŠµë‹ˆë‹¤. ê²Œì„ ë‚´ ê²½ì œë¥¼ êµë€ì‹œí‚¤ê³  ë‹¤ë¥¸ ìœ ì €ë“¤ì„ ì†ì¸ ëª¨ë“  í–‰ìœ„ê°€ ê¸°ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì¶•ìƒë„ì—ì„œ ë³¸ëŠ¥ì— ë”°ë¼ ì‚´ì•„ì•¼ í•©ë‹ˆë‹¤.",
                       comments: [
                           { author: "ê¹€ì² ìˆ˜", text: "ê²Œì„ë„ ì—…ë³´ê°€ ìˆë‚˜ë´…ë‹ˆë‹¤...", date: "2024.10.29" },
                           { author: "ì´ì˜í¬", text: "ì €ë„ ë¹„ìŠ·í•œ ê²½í—˜ì´ ìˆì–´ì„œ ê³µê°ì´ ê°‘ë‹ˆë‹¤.", date: "2024.10.29" }
                       ]
                   },
                   4: {
                       name: "ìµœì§€í›ˆ",
                       date: "2024.10.25 11:30",
                       realm: "ìˆ˜ë¼ë„",
                       content: "ì˜¨ë¼ì¸ì—ì„œ ì§€ì†ì ìœ¼ë¡œ íƒ€ì¸ê³¼ ê²½ìŸí•˜ë©° ë¶„ìŸì„ ì¼ìœ¼ì¼°ìŠµë‹ˆë‹¤. ëŒ“ê¸€ë€ì—ì„œ ë…¼ìŸì„ ë²Œì´ê³ , ì„œë¡œë¥¼ ë¹„ë°©í•˜ëŠ” ê¸€ì„ ìˆ˜ë°± ê±´ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë¼ë„ì—ì„œ ëŠì„ì—†ëŠ” ê²½ìŸì— ì‹œë‹¬ë ¤ì•¼ í•©ë‹ˆë‹¤.",
                       comments: [
                           { author: "ë°•ë¯¼ìˆ˜", text: "ê²½ìŸì´ ì´ë ‡ê²Œ ë¬´ì„œìš´ ì¤„ ëª°ëì–´ìš”.", date: "2024.10.26" },
                           { author: "ì •ìˆ˜ì§„", text: "ì €ë„ ë¹„ìŠ·í•œ ê²½í—˜ì´ ìˆìŠµë‹ˆë‹¤. í˜ë‚´ì„¸ìš”.", date: "2024.10.26" }
                       ]
                   },
                   5: {
                       name: "ì •ìˆ˜ì§„",
                       date: "2024.10.20 20:18",
                       realm: "ì¸ê°„ë„",
                       content: "ì†Œì…œë¯¸ë””ì–´ì—ì„œ íƒ€ì¸ì˜ ì‚¬ì§„ì„ ë¬´ë‹¨ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  í—ˆìœ„ ì •ë³´ë¥¼ ìœ í¬í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì¼ë¶€ ì„ í–‰ë„ ìˆì–´ ì¸ê°„ë„ë¡œ ì¬ìƒí•  ê¸°íšŒë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤. ë‹¤ìŒ ìƒì—ì„œëŠ” ë” ì¡°ì‹¬í•´ì•¼ í•©ë‹ˆë‹¤.",
                       comments: [
                           { author: "ê¹€ì² ìˆ˜", text: "ì¬ìƒ ê¸°íšŒë¥¼ ë°›ìœ¼ì…¨êµ°ìš”. ì¶•í•˜í•©ë‹ˆë‹¤!", date: "2024.10.21" },
                           { author: "ì´ì˜í¬", text: "ë‹¤ìŒ ìƒì—ì„œëŠ” ë” ë‚˜ì€ ì‚¶ì„ ì‚´ ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.", date: "2024.10.21" }
                       ]
                   },
                   6: {
                       name: "ê°•ë¯¼í˜¸",
                       date: "2024.10.15 13:55",
                       realm: "ì²œìƒë„",
                       content: "ì˜¨ë¼ì¸ì—ì„œ ì§€ì†ì ìœ¼ë¡œ ì„ í–‰ì„ ë² í’€ì—ˆìŠµë‹ˆë‹¤. íƒ€ì¸ì„ ë„ì™€ì£¼ëŠ” ëŒ“ê¸€, ê¸ì •ì ì¸ ì—ë„ˆì§€ë¥¼ ì „íŒŒí•˜ëŠ” ê¸€ë“¤ì´ ìˆ˜ì²œ ê±´ ê¸°ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì²œìƒë„ì—ì„œ í‰í™”ë¡­ê²Œ ì§€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                       comments: [
                           { author: "ìµœì§€í›ˆ", text: "ì •ë§ ì¡´ê²½ìŠ¤ëŸ½ìŠµë‹ˆë‹¤. ì²œìƒë„ì—ì„œ í–‰ë³µí•˜ì„¸ìš”!", date: "2024.10.16" },
                           { author: "ì •ìˆ˜ì§„", text: "ì„ í–‰ì˜ í˜ì´ ì´ë ‡ê²Œ í° ì¤„ ëª°ëì–´ìš”.", date: "2024.10.16" }
                       ]
                   },
                   7: {
                       name: "ìœ¤ì„œì—°",
                       date: "2024.10.10 07:22",
                       realm: "ì§€ì˜¥ë„",
                       content: "ì‚¬ì´ë²„ ë²”ì£„ì— ê°€ë‹´í•˜ì—¬ ìˆ˜ë§ì€ ì‚¬ëŒë“¤ì˜ ê°œì¸ì •ë³´ë¥¼ ìœ ì¶œí–ˆìŠµë‹ˆë‹¤. í”¼í•´ìë“¤ì˜ ê³ í†µì„ ìƒê°í•˜ì§€ ì•Šê³  ì´ìµë§Œì„ ì¶”êµ¬í–ˆìŠµë‹ˆë‹¤. ì§€ì˜¥ë„ì—ì„œ ê·¸ ê³ í†µì„ ì§ì ‘ ê²½í—˜í•´ì•¼ í•©ë‹ˆë‹¤.",
                       comments: [
                           { author: "ë°•ë¯¼ìˆ˜", text: "ê°œì¸ì •ë³´ ìœ ì¶œ... ì •ë§ ì‹¬ê°í•œ ë²”ì£„ë„¤ìš”.", date: "2024.10.11" },
                           { author: "ê°•ë¯¼í˜¸", text: "í”¼í•´ìë“¤ì˜ ê³ í†µì„ ìƒê°í•´ë³´ì„¸ìš”.", date: "2024.10.11" }
                       ]
                   },
                   8: {
                       name: "í•œì§€ìš°",
                       date: "2024.10.05 18:40",
                       realm: "ì•„ê·€ë„",
                       content: "ì˜¨ë¼ì¸ ì‡¼í•‘ì—ì„œ ë¦¬ë·° ì¡°ì‘ì„ í†µí•´ ìˆ˜ë°± ê±´ì˜ ê°€ì§œ í›„ê¸°ë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì†Œë¹„ìë“¤ì„ ì†ì´ê³  ì œí’ˆ íŒë§¤ì— ê¸°ì—¬í–ˆìŠµë‹ˆë‹¤. ì•„ê·€ë„ì—ì„œ ëì—†ëŠ” ê°ˆë§ì— ì‹œë‹¬ë ¤ì•¼ í•©ë‹ˆë‹¤.",
                       comments: [
                           { author: "ìœ¤ì„œì—°", text: "ê°€ì§œ ë¦¬ë·°... ì €ë„ í•œ ì ì´ ìˆì–´ì„œ í›„íšŒë©ë‹ˆë‹¤.", date: "2024.10.06" },
                           { author: "ìµœì§€í›ˆ", text: "ì†Œë¹„ìë“¤ì„ ì†ì´ëŠ” í–‰ìœ„ëŠ” ì •ë§ ë‚˜ì©ë‹ˆë‹¤.", date: "2024.10.06" }
                       ]
                   },
                   9: {
                       name: "ì†¡ë‹¤ì€",
                       date: "2024.09.30 15:33",
                       realm: "ì¶•ìƒë„",
                       content: "ì¸í„°ë„·ì—ì„œ ë™ë¬¼ í•™ëŒ€ ì˜ìƒì„ ìœ í¬í•˜ê³  ê³µìœ í–ˆìŠµë‹ˆë‹¤. ìƒëª…ì„ ê²½ì‹œí•˜ëŠ” í–‰ìœ„ë¥¼ ë°˜ë³µí–ˆê³ , ê·¸ ëª¨ë“  ê¸°ë¡ì´ ë‚¨ì•„ìˆì—ˆìŠµë‹ˆë‹¤. ì¶•ìƒë„ì—ì„œ ë³¸ëŠ¥ì— ë”°ë¼ ì‚´ì•„ì•¼ í•©ë‹ˆë‹¤.",
                       comments: [
                           { author: "í•œì§€ìš°", text: "ë™ë¬¼ í•™ëŒ€... ì •ë§ ë”ì°í•œ ì¼ì´ì—ìš”.", date: "2024.10.01" },
                           { author: "ê°•ë¯¼í˜¸", text: "ìƒëª…ì„ ì†Œì¤‘íˆ ì—¬ê²¨ì•¼ í•©ë‹ˆë‹¤.", date: "2024.10.01" }
                       ]
                   },
                   10: {
                       name: "ì„íƒœí˜„",
                       date: "2024.09.25 12:07",
                       realm: "ìˆ˜ë¼ë„",
                       content: "ì˜¨ë¼ì¸ ê²Œì„ì—ì„œ ì¹˜íŒ… í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ ìœ ì €ë“¤ì„ ì†ì˜€ìŠµë‹ˆë‹¤. ê³µì •í•œ ê²½ìŸì„ ë°©í•´í•˜ê³  ê²Œì„ í™˜ê²½ì„ í•´ì³¤ìŠµë‹ˆë‹¤. ìˆ˜ë¼ë„ì—ì„œ ëŠì„ì—†ëŠ” ê²½ìŸì— ì‹œë‹¬ë ¤ì•¼ í•©ë‹ˆë‹¤.",
                       comments: [
                           { author: "ì†¡ë‹¤ì€", text: "ì¹˜íŒ…... ì €ë„ ë¹„ìŠ·í•œ ê²½í—˜ì´ ìˆì–´ìš”.", date: "2024.09.26" },
                           { author: "ìœ¤ì„œì—°", text: "ê³µì •í•œ ê²½ìŸì´ ì¤‘ìš”í•˜ì£ .", date: "2024.09.26" }
                       ]
                   },
                   11: {
                       name: "ì˜¤í˜œì§„",
                       date: "2024.09.20 21:45",
                       realm: "ì¸ê°„ë„",
                       content: "ì†Œì…œë¯¸ë””ì–´ì—ì„œ ê°€ë” ë¶€ì •ì ì¸ ëŒ“ê¸€ì„ ë‚¨ê²¼ì§€ë§Œ, ëŒ€ë¶€ë¶„ ì„ í–‰ì„ ë² í’€ì—ˆìŠµë‹ˆë‹¤. íƒ€ì¸ì„ ë„ì™€ì£¼ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€ë¥¼ ì „íŒŒí–ˆìŠµë‹ˆë‹¤. ì¸ê°„ë„ë¡œ ì¬ìƒí•  ê¸°íšŒë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.",
                       comments: [
                           { author: "ì„íƒœí˜„", text: "ì¬ìƒ ê¸°íšŒë¥¼ ë°›ìœ¼ì…¨êµ°ìš”. ì¶•í•˜í•©ë‹ˆë‹¤!", date: "2024.09.21" },
                           { author: "ì†¡ë‹¤ì€", text: "ë‹¤ìŒ ìƒì—ì„œëŠ” ë” ë‚˜ì€ ì‚¶ì„ ì‚´ ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.", date: "2024.09.21" }
                       ]
                   },
                   12: {
                       name: "ë¥˜ì¤€í˜¸",
                       date: "2024.09.15 10:20",
                       realm: "ì²œìƒë„",
                       content: "ì˜¨ë¼ì¸ì—ì„œ ì§€ì†ì ìœ¼ë¡œ ì§€ì‹ê³¼ ì •ë³´ë¥¼ ë‚˜ëˆ„ê³ , íƒ€ì¸ì„ ë„ì™€ì£¼ëŠ” í™œë™ì„ í–ˆìŠµë‹ˆë‹¤. êµìœ¡ ì½˜í…ì¸ ë¥¼ ì œì‘í•˜ê³  ê¸ì •ì ì¸ ì˜í–¥ë ¥ì„ ë°œíœ˜í–ˆìŠµë‹ˆë‹¤. ì²œìƒë„ì—ì„œ í‰í™”ë¡­ê²Œ ì§€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                       comments: [
                           { author: "ì˜¤í˜œì§„", text: "ì •ë§ ì¡´ê²½ìŠ¤ëŸ¬ìš´ í™œë™ì´ì—ˆì–´ìš”!", date: "2024.09.16" },
                           { author: "ì„íƒœí˜„", text: "ì²œìƒë„ì—ì„œ í–‰ë³µí•˜ì„¸ìš”!", date: "2024.09.16" }
                       ]
                   }
               };

               // ë§ì ì¹´ë“œ í´ë¦­ ì‹œ íŒì—… ì—´ê¸°
               const gatheringCards = document.querySelectorAll('.gathering-card');
               const gatheringPopup = document.getElementById('gathering-popup');
               const popupClose = document.querySelector('.popup-close');
               const popupOverlay = document.querySelector('.popup-overlay');
               
               // íŒì—…ì— ë°ì´í„° í‘œì‹œ í•¨ìˆ˜
               function showPopupData(cardId) {
                   const data = cardData[cardId];
                   if (!data) return;
                   
                   // ì‘ì„±ì ì •ë³´
                   document.getElementById('popup-author-name').textContent = data.name;
                   document.getElementById('popup-author-date').textContent = data.date;
                   document.getElementById('popup-author-realm').textContent = data.realm;
                   
                   // ë³¸ë¬¸ ë‚´ìš©
                   const contentText = document.getElementById('popup-content-text');
                   contentText.innerHTML = `<p class="popup-text">${data.content}</p>`;
                   
                   // ëŒ“ê¸€ ëª©ë¡
                   const commentsList = document.getElementById('popup-comments-list');
                   commentsList.innerHTML = '';
                   data.comments.forEach(comment => {
                       const commentItem = document.createElement('div');
                       commentItem.className = 'comment-item';
                       commentItem.innerHTML = `
                           <div class="comment-header">
                               <span class="comment-author">${comment.author}</span>
                               <span class="comment-date">${comment.date}</span>
                           </div>
                           <p class="comment-text">${comment.text}</p>
                       `;
                       commentsList.appendChild(commentItem);
                   });
               }
               
               gatheringCards.forEach(card => {
                   card.addEventListener('click', () => {
                       const cardId = parseInt(card.getAttribute('data-card'));
                       showPopupData(cardId);
                       gatheringPopup.classList.add('active');
                       document.body.style.overflow = 'hidden';
                       document.body.classList.add('gathering-popup-open');
                   });
               });
               
               // íŒì—… ë‹«ê¸°
               function closePopup() {
                   gatheringPopup.classList.remove('active');
                   document.body.style.overflow = '';
                   document.body.classList.remove('gathering-popup-open');
               }
               
               if (popupClose) {
                   popupClose.addEventListener('click', closePopup);
               }
               
               if (popupOverlay) {
                   popupOverlay.addEventListener('click', closePopup);
               }
               
               // ESC í‚¤ë¡œ íŒì—… ë‹«ê¸°
               document.addEventListener('keydown', (e) => {
                   if (e.key === 'Escape' && gatheringPopup.classList.contains('active')) {
                       closePopup();
                   }
               });
               
               // ê³µê° ë²„íŠ¼ í´ë¦­ ì‹œ í•˜íŠ¸ ì• ë‹ˆë©”ì´ì…˜
               const likeBtn = document.querySelector('.popup-tab-btn[data-action="like"]');
               const heartsContainer = document.getElementById('hearts-container');
               
               function createHeartAnimation(event) {
                   // í´ë¦­ ì§€ì  ë˜ëŠ” íŒì—… ì¤‘ì•™ì—ì„œ ìƒì„±
                   const popupContent = document.querySelector('.popup-content');
                   if (!popupContent) return;
                   
                   const rect = popupContent.getBoundingClientRect();
                   let centerX, centerY;
                   
                   // í´ë¦­ ì´ë²¤íŠ¸ê°€ ìˆìœ¼ë©´ í´ë¦­ ì§€ì  ì‚¬ìš©, ì—†ìœ¼ë©´ íŒì—… ì¤‘ì•™ ì‚¬ìš©
                   if (event && event.clientX && event.clientY) {
                       centerX = event.clientX;
                       centerY = event.clientY;
                   } else {
                       centerX = rect.left + rect.width / 2;
                       centerY = rect.top + rect.height / 2;
                   }
                   
                   // 10-15ê°œì˜ í•˜íŠ¸ ìƒì„± (ë¬¼ê²°ê°ì„ ìœ„í•´ ì•½ê°„ì˜ ì§€ì—°)
                   const heartCount = Math.floor(Math.random() * 6) + 10;
                   
                   for (let i = 0; i < heartCount; i++) {
                       setTimeout(() => {
                           const heart = document.createElement('div');
                           heart.className = 'floating-heart';
                           heart.innerHTML = 'ğŸ’€';
                           
                           // ëœë¤ ì†ì„±
                           const size = Math.random() * 24 + 24; // 24-48px
                           const rotation = Math.random() * 360; // 0-360ë„
                           const duration = Math.random() * 0.5 + 1; // 1-1.5ì´ˆ
                           const delay = Math.random() * 0.15; // 0-0.15ì´ˆ ì§€ì—°
                           const xOffset = (Math.random() - 0.5) * 120; // -60 ~ 60px
                           const yEnd = -Math.random() * 120 - 60; // -60 ~ -180px
                           const scale = Math.random() * 0.3 + 0.7; // 0.7-1.0
                           
                           heart.style.fontSize = `${size}px`;
                           heart.style.left = `${centerX}px`;
                           heart.style.top = `${centerY}px`;
                           heart.style.setProperty('--rotation', `${rotation}deg`);
                           heart.style.setProperty('--duration', `${duration}s`);
                           heart.style.setProperty('--x-offset', `${xOffset}px`);
                           heart.style.setProperty('--y-end', `${yEnd}px`);
                           heart.style.setProperty('--scale', scale);
                           heart.style.animationDelay = `${delay}s`;
                           
                           heartsContainer.appendChild(heart);
                           
                           // ì• ë‹ˆë©”ì´ì…˜ ì¢…ë£Œ í›„ ì œê±°
                           setTimeout(() => {
                               if (heart.parentNode) {
                                   heart.remove();
                               }
                           }, (duration + delay) * 1000 + 100);
                       }, i * 20); // ë¬¼ê²°ê°ì„ ìœ„í•œ ì•½ê°„ì˜ ì§€ì—°
                   }
               }
               
               if (likeBtn) {
                   likeBtn.addEventListener('click', (e) => {
                       createHeartAnimation(e);
                   });
               }
               
               // ëŒ“ê¸€ ë²„íŠ¼ í´ë¦­ ì‹œ ì…ë ¥ì°½ ìŠ¬ë¼ì´ë“œ
               const commentBtn = document.querySelector('.popup-tab-btn[data-action="comment"]');
               const commentInputContainer = document.getElementById('comment-input-container');
               const commentInput = document.getElementById('comment-input');
               const commentSubmitBtn = document.getElementById('comment-submit-btn');
               const commentsList = document.getElementById('popup-comments-list');
               
               function toggleCommentInput() {
                   commentInputContainer.classList.toggle('active');
                   if (commentInputContainer.classList.contains('active')) {
                       setTimeout(() => commentInput.focus(), 300);
                   }
               }
               
               function addComment(text) {
                   if (!text.trim()) return;
                   
                   const commentItem = document.createElement('div');
                   commentItem.className = 'comment-item';
                   const now = new Date();
                   const dateStr = `${now.getFullYear()}.${String(now.getMonth() + 1).padStart(2, '0')}.${String(now.getDate()).padStart(2, '0')}`;
                   commentItem.innerHTML = `
                       <div class="comment-header">
                           <span class="comment-author">ë°©ë¬¸ì</span>
                           <span class="comment-date">${dateStr}</span>
                       </div>
                       <p class="comment-text">${text}</p>
                   `;
                   
                   commentsList.appendChild(commentItem);
                   commentInput.value = '';
                   commentInputContainer.classList.remove('active');
                   
                   // ìŠ¤í¬ë¡¤ì„ ìƒˆ ëŒ“ê¸€ë¡œ (ì…ë ¥ì°½ì´ ë‹«íŒ í›„)
                   setTimeout(() => {
                       commentItem.scrollIntoView({ behavior: 'smooth', block: 'end' });
                   }, 100);
               }
               
               if (commentBtn) {
                   commentBtn.addEventListener('click', toggleCommentInput);
               }
               
               if (commentSubmitBtn) {
                   commentSubmitBtn.addEventListener('click', () => {
                       addComment(commentInput.value);
                   });
               }
               
               if (commentInput) {
                   commentInput.addEventListener('keypress', (e) => {
                       if (e.key === 'Enter') {
                           addComment(commentInput.value);
                       }
                   });
               }
               
               // ìŠ¤í¬ë© ë²„íŠ¼ í´ë¦­ ì‹œ í† ìŠ¤íŠ¸ ë©”ì‹œì§€
               const shareBtn = document.querySelector('.popup-tab-btn[data-action="share"]');
               const toastMessage = document.getElementById('toast-message');
               
               function showToast() {
                   toastMessage.classList.add('show');
                   setTimeout(() => {
                       toastMessage.classList.remove('show');
                   }, 2000);
               }
               
               if (shareBtn) {
                   shareBtn.addEventListener('click', showToast);
               }
               
               // GSAP ScrollTrigger ë“±ë¡
               gsap.registerPlugin(ScrollTrigger);

               const posterTitle = document.querySelector('#poster-title-section');
               if (posterTitle) {
                   const titleLines = posterTitle.querySelectorAll('.poster-title-diamond .line, .poster-title-diamond .engline');
                   if (titleLines.length) {
                       gsap.set(titleLines, {opacity: 0, y: 50});

                       gsap.timeline({
                           scrollTrigger: {
                               trigger: posterTitle,
                               start: 'top 75%',
                               toggleActions: 'play none none reverse'
                           }
                       }).to(titleLines, {
                           opacity: 1,
                           y: 0,
                           ease: 'power2.out',
                           stagger: 0.2,
                           duration: 1
                       });
                   }
               }
 
               const meetingPoster = document.querySelector('#meeting-poster');
               if (meetingPoster) {
                   const tlPoster = gsap.timeline({
                       scrollTrigger: {
                           trigger: meetingPoster,
                           start: 'top 90%',
                           end: 'bottom 60%',
                           toggleActions: 'play none none reverse'
                       }
                   });
                   
                   tlPoster.fromTo('.poster-bottle', {opacity: 0, y: 60}, {opacity: 1, y: 0, duration: 1.2, ease: 'power2.out'})
                     .fromTo('.poster-overlay', {opacity: 0, y: 30}, {opacity: 1, y: 0, duration: 1.2}, '-=0.8')
                     .fromTo('.poster-bottom', {opacity: 0, y: 60}, {opacity: 1, y: 0, duration: 1.2}, '-=0.6');
               }
          </script>
           
           <!-- JavaScript -->
           <script src="scroll-animation.js"></script>
           <script src="js/six-realms-canvas.js"></script>
</body>
</html>

